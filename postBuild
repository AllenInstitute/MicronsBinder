home=$( pwd )

mkdir $HOME/.jupyter
echo "c.NotebookApp.iopub_data_rate_limit=1e22" >> $HOME/.jupyter/jupyter_notebook_config.py
jupyter nbextension install --py --sys-prefix itkwidgets
jupyter nbextension enable --py --sys-prefix itkwidgets
cd /tmp/
jupyter labextension install @jupyter-widgets/jupyterlab-manager --no-build
jupyter labextension install jupyter-matplotlib jupyterlab-datawidgets jupyter-webrtc itkwidgets --no-build
jupyter labextension install jupyterlab-dash --no-build
jupyter lab build --minimize=False  # minimize uses too much memory
cd $home

# intro
introdir="notebooks/intro/data"
mkdir -p ${introdir}
wget -q -O ${introdir}/pni_synapses_v185.csv "https://zenodo.org/record/3710459/files/pni_synapses_v185.csv?download=1"
wget -q -O ${introdir}/soma_valence_v185.csv "https://zenodo.org/record/3710459/files/soma_valence_v185.csv?download=1"
wget -q -O ${introdir}/soma_subgraph_synapses_spines_v185.csv "https://zenodo.org/record/3710459/files/soma_subgraph_synapses_spines_v185.csv?download=1"


# vignette_analysis/data - data used across multiple vignette manuscript analyses
datadir="notebooks/vignette_analysis/data"
mkdir -p ${datadir}
cd ${datadir} \
&& wget -q https://zenodo.org/record/5579388/files/211019_smoothed_skeletons.tgz \
&& tar -xzf smoothed_skeletons_v185.tgz
cd $home

# vignette_analysis/function
funcdir="notebooks/vignette_analysis/function/data"
mkdir -p ${funcdir}
cd ${funcdir} \
&& wget -q https://zenodo.org/record/5579388/files/211019_vignette_functional_analysis_data.tgz \
&& tar -xzf 211019_vignette_functional_analysis_data.tgz \
&& tar -xzf function_data_tables.tgz
cd $home

# vignette_analysis/mitochondria
mitodir="notebooks/vignette_analysis/mitochondria/data"
mkdir -p ${mitodir}
cd ${mitodir} \
&& gdown --id 1MruDsi7q77G5Mq0b1t95TDFwVoHDK3WB -O mito_intermediate_data_v185.tgz \
&& tar -xzf mito_intermediate_data_v185.tgz
cd $home

# vignette_analysis/motifs
motifdir="notebooks/vignette_analysis/motifs/"
cd ${motifdir} \
&& wget -q https://zenodo.org/record/5579388/files/211019_vignette_motif_analysis_data.tgz \
&& tar -xzf multiscale_motif_base_data.tgz \
&& tar -xzf multiscale_motif_intermediate_data.tgz
cd $home

# vignette_analysis/resource_statistics
resourcedir="notebooks/vignette_analysis/resource_statistics/data"
mkdir -p ${resourcedir}
cd ${resourcedir} \
&& wget -q https://zenodo.org/record/5579388/files/211019_vignette_resourcestats_analysis_data.tgz \
&& tar -xzf 211019_vignette_resourcestats_analysis_data.tgz
cd $home
